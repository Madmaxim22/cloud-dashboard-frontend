# Cloud Dashboard

Frontend приложение для управления облачными серверами, реализованное с использованием современных веб-технологий. Приложение позволяет оператору создавать, запускать, останавливать и удалять облачные сервера через интуитивный веб-интерфейс.

## Описание проекта

Приложение представляет собой веб-интерфейс для управления облачными серверами (инстансами), разделенный на две основные части:
- Левая часть: 'Your micro instances:' - виджет управления инстансами
- Правая часть: 'Worklog:' - журнал событий и состояний инстансов

Приложение использует комбинацию технологий для обеспечения реального времени обновлений и управления:
- REST API для основных операций (создание, удаление инстансов)
- WebSocket для управления состоянием инстансов (запуск/остановка)
- Server-Sent Events (SSE) для получения обновлений состояния и логов

## Архитектура приложения

### Основные компоненты

1. **DashboardView**  - отвечает за отображение интерфейса и обработку пользовательских действий
2. **DashboardManager**  - основной класс управления логикой приложения
3. **HttpService**  - обработка HTTP-запросов к серверу
4. **SseService** - управление SSE и WebSocket соединениями

### Структура файлов

```
cloud-dashboard-frontend/
├── src/
│   ├── index.html          # Основная HTML-разметка
│   ├── index.js            # Точка входа приложения
│   ├── css/
│   │   └── style.css       # Стили приложения
│   └── js/
│       ├── DasboardView.js     # Класс отображения дашборда
│       ├── DashboardManager.js # Класс управления логикой
│       └── сonnection/         # Сервисы подключения
│           ├── HttpService.js
│           └── SseService.js
├── package.json           # Зависимости и скрипты
├── webpack.config.js      # Конфигурация сборки
└── README.md             # Документация
```

## Функциональность

### Основные возможности

- **Создание инстансов**: возможность создания новых облачных серверов
- **Управление состоянием**: запуск и остановка инстансов
- **Удаление инстансов**: возможность удаления существующих серверов
- **Отображение состояния**: визуализация текущего состояния инстансов
- **Журнал событий**: отображение логов и изменений состояния в реальном времени

### Статусы инстансов

Приложение отслеживает и отображает следующие статусы жизненного цикла инстансов:

- `received` - команда получена сервером
- `created` - инстанс создан
- `started` - инстанс запущен
- `stopped` - инстанс остановлен
- `removed` - инстанс удален

## Технологии

- **HTML5** - структура веб-страницы
- **CSS3** - стилизация и адаптивный дизайн
- **JavaScript (ES6+)** - основная логика приложения
- **Webpack** - сборка проекта
- **EventSource (SSE)** - односторонняя связь с сервером
- **WebSocket** - двустороннее общение в реальном времени
- **Fetch API** - HTTP-запросы

## Установка и запуск

1. Клонируйте репозиторий:
```bash
git clone <repository-url>
```

2. Установите зависимости:
```bash
npm install
```

3. Запустите приложение в режиме разработки:
```bash
npm start
```

4. Откройте браузер по адресу: http://localhost:5000

### Скрипты

- `npm start` - запуск в режиме разработки с горячей перезагрузкой
- `npm run build:dev` - сборка для разработки
- `npm run build:prod` - сборка для продакшена
- `npm run lint` - проверка и исправление кода

## Серверная часть

Серверная часть приложения реализована как комбинированный REST API + SSE сервер, развернутый на https://cloud-dashboard-backend-vkvl.onrender.com.

### Доступные эндпоинты

- `GET /` - получение массива инстансов
- `GET /sse` - эндпоинт для подключения по SSE
- `POST /` - создание нового инстанса
- `DELETE /:id` - удаление инстанса по ID

### Протоколы взаимодействия

1. **REST API**:
   - Используется для получения списка инстансов, создания и удаления
   - Ответы в формате JSON

2. **WebSocket**:
   - Используется для управления состоянием инстансов (запуск/остановка)
   - Отправка команд в формате JSON: `{"id": "uuid", "action": "start|stop"}`

3. **Server-Sent Events**:
   - Используется для получения обновлений состояния и логов
   - Подписка на событие `message`
   - Данные передаются в поле `data`

## Особенности реализации

- При загрузке страницы загружается массив инстансов и отрисовывается в виджете управления
- Состояния инстансов синхронизируются с сервером в реальном времени
- Кнопки управления отображаются в зависимости от текущего состояния инстанса
- Все изменения состояния отображаются как в виджете управления, так и в журнале событий
- Приложение корректно обрабатывает соединения и закрывает их при покидании страницы

## Стили и адаптивность

Приложение имеет адаптивный дизайн, который корректно отображается на различных устройствах. Стили реализованы с использованием CSS Flexbox и включают:

- Четкое визуальное различие между состояниями (запущен/остановлен)
- Удобные кнопки управления с цветовой индикацией
- Прокручиваемый журнал событий
- Адаптация под мобильные устройства

## Автор

Максим Мухомедьяров <madmaxim22@gmail.com>